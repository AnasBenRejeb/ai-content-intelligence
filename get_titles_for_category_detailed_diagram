// get_titles_for_category
digraph {
	rankdir=TB
	Start [label="Start: get_titles_for_category(query, max_pages=2)" color=black style=bold]
	Init [label="Initialize empty list: titles = []" color=blue]
	PageLoop [label="For each page in 1 to max_pages" color=green]
	ConstructURL [label="Construct NewsAPI URL with query, page, PAGE_SIZE, API_KEY" color=blue]
	SendRequest [label="Send GET request using requests.get(url)" color=blue]
	ReceiveResponse [label="Receive HTTP response from API" color=purple]
	ParseJSON [label="Parse JSON response: data = response.json()" color=blue]
	CheckStatus [label="Check if data['status'] == 'ok'" color=red]
	StatusFail [label="Print error message and break" color=red]
	GetArticles [label="Extract articles list: articles = data.get('articles', [])" color=blue]
	CheckArticles [label="If no articles: break" color=red]
	ArticleLoop [label="For each article in articles" color=green]
	GetTitle [label="Get article title: title = article.get(\"title\")" color=blue]
	CheckTitle [label="If title exists and not in titles list" color=red]
	DetectLang [label="Detect language using langdetect" color=red]
	AppendTitle [label="Append title to titles list" color=blue]
	ReturnTitles [label="Return titles list" color=black style=bold]
	Start -> Init [label="function called"]
	Init -> PageLoop [label="titles list empty, start paging"]
	PageLoop -> ConstructURL [label="generate URL for current page"]
	ConstructURL -> SendRequest [label="URL ready, sending HTTP GET request"]
	SendRequest -> ReceiveResponse [label="HTTP request sent, waiting for API response"]
	ReceiveResponse -> ParseJSON [label="response received, parse JSON"]
	ParseJSON -> CheckStatus [label="data dictionary created"]
	CheckStatus -> StatusFail [label="status != ok → API returned error"]
	CheckStatus -> GetArticles [label="status == ok → proceed to extract articles"]
	GetArticles -> CheckArticles [label="articles list extracted, check if empty"]
	CheckArticles -> PageLoop [label="articles exist → continue to next page" color=green style=dashed]
	CheckArticles -> ReturnTitles [label="no articles → finish and return" color=red]
	PageLoop -> ArticleLoop [label="articles available → iterate over them" color=green]
	ArticleLoop -> GetTitle [label="select one article, extract title"]
	GetTitle -> CheckTitle [label="check if title exists and not duplicated"]
	CheckTitle -> DetectLang [label="valid title → detect language"]
	CheckTitle -> ArticleLoop [label="invalid/duplicate → skip to next article" color=green style=dashed]
	DetectLang -> AppendTitle [label="if English → append to titles list"]
	DetectLang -> ArticleLoop [label="if not English → skip to next article" color=green style=dashed]
	AppendTitle -> ArticleLoop [label="title added → continue loop"]
	PageLoop -> ReturnTitles [label="after all pages processed → return titles" color=black]
}
