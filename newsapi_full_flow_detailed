// NewsAPI Titles Extraction Full Flow
digraph {
	rankdir=TB
	Imports [label="Import modules: requests, langdetect" color=black style=bold]
	APIKey [label="Set API_KEY and PAGE_SIZE" color=blue]
	LangDetectSeed [label="Set DetectorFactory.seed=0 (consistent lang detection)" color=blue]
	Categories [label="Define categories dictionary" color=blue]
	MainStart [label="Start main program" color=black style=bold]
	CategoryLoop [label="For each category in categories" color=green]
	PrintCategory [label="Print \"Fetching titles for: {category}\"" color=blue]
	CallFunction [label="Call get_titles_for_category(query)" color=green]
	FunctionStart [label="Start get_titles_for_category()" color=black style=bold]
	Init [label="Initialize empty list: titles = []" color=blue]
	PageLoop [label="For each page in 1 to max_pages" color=green]
	ConstructURL [label="Construct NewsAPI URL with query, page, PAGE_SIZE, API_KEY" color=blue]
	SendRequest [label="Send GET request using requests.get(url)" color=blue]
	ReceiveResponse [label="Receive HTTP response from API" color=purple]
	ParseJSON [label="Parse JSON response: data = response.json()" color=blue]
	CheckStatus [label="Check if data['status'] == 'ok'" color=red]
	StatusFail [label="Print error message and break" color=red]
	GetArticles [label="Extract articles list: articles = data.get('articles', [])" color=blue]
	CheckArticles [label="If no articles: break" color=red]
	ArticleLoop [label="For each article in articles" color=green]
	GetTitle [label="Get article title: title = article.get(\"title\")" color=blue]
	CheckTitle [label="If title exists and not in titles list" color=red]
	DetectLang [label="Detect language using langdetect" color=red]
	AppendTitle [label="Append title to titles list" color=blue]
	ReturnTitles [label="Return titles list" color=black style=bold]
	PrintCategoryResult [label="Print \"→ Got {n} English titles in {category}\"" color=blue]
	AppendAll [label="Extend all_titles list with category_titles" color=green]
	PrintTotal [label="Print total aggregated titles" color=black style=bold]
	PrintAllTitles [label="Print all titles enumerated" color=blue]
	Imports -> APIKey
	APIKey -> LangDetectSeed
	LangDetectSeed -> Categories
	Categories -> MainStart
	MainStart -> CategoryLoop
	CategoryLoop -> PrintCategory [label="current category"]
	PrintCategory -> CallFunction
	CallFunction -> FunctionStart
	FunctionStart -> Init [label="initialize empty list"]
	Init -> PageLoop [label="start paging"]
	PageLoop -> ConstructURL [label="generate URL for page"]
	ConstructURL -> SendRequest [label="URL ready → HTTP GET"]
	SendRequest -> ReceiveResponse [label="wait for API response"]
	ReceiveResponse -> ParseJSON [label="parse JSON"]
	ParseJSON -> CheckStatus [label="data dictionary ready"]
	CheckStatus -> StatusFail [label="status != ok → error, break"]
	CheckStatus -> GetArticles [label="status == ok → extract articles"]
	GetArticles -> CheckArticles [label="check if articles list empty"]
	CheckArticles -> PageLoop [label="articles exist → next page" color=green style=dashed]
	CheckArticles -> ReturnTitles [label="no articles → return" color=red]
	PageLoop -> ArticleLoop [label="articles available → iterate"]
	ArticleLoop -> GetTitle [label="extract title"]
	GetTitle -> CheckTitle [label="check title validity/duplication"]
	CheckTitle -> DetectLang [label="valid title → detect language"]
	CheckTitle -> ArticleLoop [label="invalid/duplicate → skip" color=green style=dashed]
	DetectLang -> AppendTitle [label="if English → append"]
	DetectLang -> ArticleLoop [label="if not English → skip" color=green style=dashed]
	AppendTitle -> ArticleLoop [label="continue loop"]
	PageLoop -> ReturnTitles [label="after all pages processed → return"]
	ReturnTitles -> PrintCategoryResult
	PrintCategoryResult -> AppendAll
	AppendAll -> CategoryLoop [label="next category"]
	CategoryLoop -> PrintTotal [label="all categories processed"]
	PrintTotal -> PrintAllTitles
}
